<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Meta tags, Bootstrap CSS, and Custom CSS -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="css/index.css" />

    <title>Intellitank Dashboard</title>

    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-database.js"></script>
    <script>
      const firebaseConfig = {
        apiKey: 'AIzaSyDzNvvAtMkO320XdM1l3-n4BjTkvyI_Drs',
        authDomain: 'intellitank-a9.firebaseapp.com',
        databaseURL:
          'https://intellitank-a9-default-rtdb.asia-southeast1.firebasedatabase.app',
        projectId: 'intellitank-a9',
        storageBucket: 'intellitank-a9.appspot.com',
        messagingSenderId: '377162448828',
        appId: '1:377162448828:web:a9e33c7aec90a13163b5b9',
      };

      // Initialize firebase
      firebase.initializeApp(firebaseConfig);

      // Make auth and database references
      const auth = firebase.auth();
      const db = firebase.database();
    </script>

    <!-- include highchartsjs to build the charts-->
    <script src="https://code.highcharts.com/highcharts.js"></script>

    <!-- include to use jquery-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <!--include icons from fontawesome-->
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.7.2/css/all.css"
      integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr"
      crossorigin="anonymous"
    />

    <!-- include Gauges Javascript library-->
    <script src="https://cdn.rawgit.com/Mikhus/canvas-gauges/gh-pages/download/2.1.7/all/gauge.min.js"></script>
  </head>

  <body>
    <div class="screen-cover d-none d-xl-none"></div>

    <!--LOGIN FORM-->
    <form id="login-form" style="display: none">
      <div class="form-elements-container">
        <label for="input-email"><b>Email</b></label>
        <input
          type="text"
          placeholder="Enter Username"
          id="input-email"
          required
        />

        <label for="input-password"><b>Password</b></label>
        <input
          type="password"
          placeholder="Enter Password"
          id="input-password"
          required
        />

        <button type="submit" id="login-button">Login</button>
        <p id="error-message" style="color: red"></p>
      </div>
    </form>

    <div class="content-sign-in" id="content-sign-in" style="display: none">
      <div class="row">
        <div class="col-12 col-lg-3 col-navbar d-none d-xl-block">
          <aside class="sidebar">
            <a href="index2.html" class="sidebar-logo">
              <div class="d-flex justify-content-start align-items-center">
                <img src="../img/logo-crop.png" alt="intellitank-logo" />
                <span>Intellitank</span>
              </div>

              <button id="toggle-navbar" onclick="toggleNavbar()">
                <img src="./assets/img/global/navbar-times.svg" alt="" />
              </button>
            </a>

            <h5 class="sidebar-title">Monitoring & Control</h5>

            <a
              href="#monitoring-cards"
              class="sidebar-item active"
              onclick="toggleActive(this)"
            >
              <!-- <img src="./assets/img/global/grid.svg" alt=""> -->

              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M21 14H14V21H21V14Z"
                  stroke="white"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M10 14H3V21H10V14Z"
                  stroke="white"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M21 3H14V10H21V3Z"
                  stroke="white"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M10 3H3V10H10V3Z"
                  stroke="white"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>

              <span>Monitoring Cards</span>
            </a>

            <a href="#" class="sidebar-item" onclick="toggleActive(this)">
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M21 14H14V21H21V14Z"
                  stroke="white"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M10 14H3V21H10V14Z"
                  stroke="white"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M21 3H14V10H21V3Z"
                  stroke="white"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M10 3H3V10H10V3Z"
                  stroke="white"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>

              <span>Gauges Indicator</span>
            </a>
            
            <a href="#" class="sidebar-item" onclick="toggleActive(this)">
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M21 14H14V21H21V14Z"
                  stroke="white"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M10 14H3V21H10V14Z"
                  stroke="white"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M21 3H14V10H21V3Z"
                  stroke="white"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M10 3H3V10H10V3Z"
                  stroke="white"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>

              <span>Charts</span>
            </a>

            <h5 class="sidebar-title">User</h5>

            <!--AUTHENTICATION BAR (USER DETAILS/LOGOUT BUTTON)-->
            <a href="#" class="sidebar-item">
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M23 21V19C22.9993 18.1137 22.7044 17.2528 22.1614 16.5523C21.6184 15.8519 20.8581 15.3516 20 15.13"
                  stroke="#ABB3C4"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M17 21V19C17 17.9391 16.5786 16.9217 15.8284 16.1716C15.0783 15.4214 14.0609 15 13 15H5C3.93913 15 2.92172 15.4214 2.17157 16.1716C1.42143 16.9217 1 17.9391 1 19V21"
                  stroke="#ABB3C4"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M16 3.13C16.8604 3.35031 17.623 3.85071 18.1676 4.55232C18.7122 5.25392 19.0078 6.11683 19.0078 7.005C19.0078 7.89318 18.7122 8.75608 18.1676 9.45769C17.623 10.1593 16.8604 10.6597 16 10.88"
                  stroke="#ABB3C4"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M9 11C11.2091 11 13 9.20914 13 7C13 4.79086 11.2091 3 9 3C6.79086 3 5 4.79086 5 7C5 9.20914 6.79086 11 9 11Z"
                  stroke="#ABB3C4"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>

              <span>
                Profile
                <div id="authentication-bar">
                  <p>
                    <span
                      class="user-email"
                      id="user-details"
                      style="color: #abb3c4; font-weight: 400; font-size: 14px"
                    >
                      USEREMAIL
                    </span>
                  </p>
                </div></span
              >
            </a>

            <a
              href="#"
              class="sidebar-item"
              id="logout-link"
              onclick="toggleActive(this)"
            >
              <!-- <img src="./assets/img/global/log-out.svg" alt=""> -->

              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M16 17L21 12L16 7"
                  stroke="#ABB3C4"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M21 12H9"
                  stroke="#ABB3C4"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M9 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H9"
                  stroke="#ABB3C4"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>

              <span>Logout</span>
            </a>
          </aside>
        </div>

        <!-- Main Content -->
        <div class="col-12 col-xl-9">
          <div class="nav">
            <div
              class="d-flex justify-content-between align-items-center w-100 mb-3 mb-md-0"
            >
              <div class="d-flex justify-content-start align-items-center">
                <button id="toggle-navbar" onclick="toggleNavbar()">
                  <img
                    src="./assets/img/global/burger.svg"
                    class="mb-2"
                    alt=""
                  />
                </button>
                <h2 class="nav-title">Intellitank Dashboard</h2>
              </div>
              <button class="btn-notif d-block d-md-none">
                <img src="./assets/img/global/bell.svg" alt="" />
              </button>
            </div>

            <div
              class="d-flex justify-content-between align-items-center nav-input-container"
            >
              <div class="nav-input-group">
                <input
                  type="text"
                  class="nav-input"
                  placeholder="Search sensors, gauges, charts"
                />
                <button class="btn-nav-input">
                  <img src="./assets/img/global/search.svg" alt="" />
                </button>
              </div>

              <button class="btn-notif d-none d-md-block">
                <img src="./assets/img/global/bell.svg" alt="" />
              </button>
            </div>
          </div>

          <div class="content">
            <div class="row">
              <!--LAST UPDATE-->
              <p>
                <span class="date-time">
                  Last update: <span id="lastUpdate"></span>
                </span>
              </p>

              <div class="col-12">
                <h2 class="content-title" id="monitoring-cards">
                  Monitoring Cards
                </h2>
                <h5 class="content-desc mb-4">
                  Water Tank Realtime Monitoring
                </h5>
              </div>

              <!-- TEMPERATURE -->
              <div class="col-12 col-md-6 col-lg-4">
                <div class="sensor-card">
                  <div
                    class="d-flex justify-content-between align-items-center"
                  >
                    <div
                      class="d-flex flex-column justify-content-between align-items-start"
                    >
                      <h5 class="content-desc">Temperature</h5>

                      <h3>
                        <span class="reading"
                          ><span id="tmp"></span> &deg;C</span
                        >
                      </h3>
                    </div>
                  </div>
                </div>
              </div>

              <!-- WATER LEVEL -->
              <div class="col-12 col-md-6 col-lg-4">
                <div class="sensor-card">
                  <div
                    class="d-flex justify-content-between align-items-center"
                  >
                    <div
                      class="d-flex flex-column justify-content-between align-items-start"
                    >
                      <h5 class="content-desc">Water Tank Volume</h5>

                      <h3>
                        <span class="reading"><span id="lvl"></span> %</span>
                      </h3>
                    </div>
                  </div>
                </div>
              </div>

              <!-- WATER FLOW -->
              <div class="col-12 col-md-6 col-lg-4">
                <div class="sensor-card">
                  <div
                    class="d-flex justify-content-between align-items-center"
                  >
                    <div
                      class="d-flex flex-column justify-content-between align-items-start"
                    >
                      <h5 class="content-desc">Water Flow</h5>

                      <h3>
                        <span class="reading"
                          ><span id="flw"></span> L/min</span
                        >
                      </h3>
                    </div>
                  </div>
                </div>
              </div>

              <!-- TURBIDITY -->
              <div class="col-12 col-md-6 col-lg-4">
                <div class="sensor-card">
                  <div
                    class="d-flex justify-content-between align-items-center"
                  >
                    <div
                      class="d-flex flex-column justify-content-between align-items-start"
                    >
                      <h5 class="content-desc">Turbidity</h5>

                      <h3>
                        <span class="reading"><span id="tur"></span> NTU</span>
                      </h3>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>

    <script>
      const navbar = document.querySelector('.col-navbar');
      const cover = document.querySelector('.screen-cover');

      const sidebar_items = document.querySelectorAll('.sidebar-item');

      function toggleNavbar() {
        navbar.classList.toggle('d-none');
        cover.classList.toggle('d-none');
      }

      function toggleActive(e) {
        sidebar_items.forEach(function (v, k) {
          v.classList.remove('active');
        });
        e.closest('.sidebar-item').classList.add('active');
      }
    </script>

    <!-- Custom JS Scripts -->
    <script src="scripts/auth.js"></script>
    <script src="scripts/index.js"></script>
  </body>
</html>
